# CLAUDE.md

## MCP 利用方針（Context7 / DeepWiki）

このプロジェクトでは、MCP を以下の方針で使い分ける。

### 使い分け
- **Context7**: 外部ライブラリ / フレームワーク / API の最新仕様確認
  - 例: Next.js, React, Tailwind, Supabase, Prisma など
  - 用途: 実装方法、設定値、API 名、バージョン差分の確認
  - 外部ライブラリの実装・設定・コード生成時は原則使う
  - バージョン差がありそうな場合は、バージョンを明示して確認する
  - 必要に応じて `resolve-library-id` → `query-docs` の順で使う

- **DeepWiki**: GitHub リポジトリの構造・設計・既存実装の理解
  - 用途: ディレクトリ構成、認証フロー、各モジュールの役割、repo文脈でのQA
  - repo 調査時は原則使う
  - まず構造を確認し、必要箇所を読む
  - repo 固有の内容と一般的知識を混同しない

### 併用ルール（重要）
repo 固有の実装と外部仕様の両方が必要な場合は、**DeepWiki → Context7** の順で使う。

1. DeepWiki で repo の構造・既存実装を把握
2. Context7 で外部仕様を確認
3. repo 文脈に合わせて実装案を作る

### 判断の目安
- 「この repo / このコードベース」の話 → **DeepWiki**
- 「このライブラリ / API の使い方」の話 → **Context7**
- エラー原因が既存コード寄り → **DeepWiki**
- エラー原因が仕様・バージョン寄り → **Context7**

### 品質ルール
- 提案時は以下を分けて説明する
  - **repo 固有の事情**（DeepWiki）
  - **外部仕様**（Context7）
- バージョン差・非推奨 API・破壊的変更は明示する
- 不明な点は断定せず、「repo前提が不明」または「仕様の追加確認が必要」と明記する
